
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>aosb.core &mdash; AOSB alpha documentation</title>
    
    <link rel="stylesheet" href="../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     'alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="AOSB alpha documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">AOSB alpha documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Module code</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for aosb.core</h1><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABCMeta</span><span class="p">,</span><span class="n">abstractmethod</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">types</span>

<span class="c"># Parts are always used as objects</span>
<div class="viewcode-block" id="Part"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Part">[docs]</a><span class="k">class</span> <span class="nc">Part</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract Superclass for all Parts</span>
<span class="sd">    </span>
<span class="sd">    Parts are the atomistic instructions in the genetic circuit execution flow</span>
<span class="sd">    </span>
<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    before : Part</span>
<span class="sd">        The part that immediately precedes this one in the execution flow</span>
<span class="sd">    after : Part</span>
<span class="sd">        The part that immediately follows this one in the execution flow</span>
<span class="sd">    moleculeConnection : class(Molecule)</span>
<span class="sd">        Each part may have a logical link to a molecule </span>
<span class="sd">    namespace : Circuit or Aspect</span>
<span class="sd">        Each part belongs to a namespace, i.e. the circuit or aspect that has</span>
<span class="sd">        added it to the execution flow</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>
    <span class="n">before</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">after</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">namespace</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">moleculeConnection</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span>
 
<span class="c"># Molecules are always used as classes  </span></div>
<div class="viewcode-block" id="Molecule"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Molecule">[docs]</a><span class="k">class</span> <span class="nc">Molecule</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Superclass for all molecules. </span>
<span class="sd">    </span>
<span class="sd">    All molecules are used as classes, not objects. Any agents such as</span>
<span class="sd">    Proteins, Transcription Factors, etc. need to be subtypes of Molecules&quot;&quot;&quot;</span>
    
    <span class="k">class</span> <span class="nc">__metaclass__</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
        <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name__</span>
    </div>
<div class="viewcode-block" id="Protein"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Protein">[docs]</a><span class="k">class</span> <span class="nc">Protein</span><span class="p">(</span><span class="n">Molecule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for Molecules that are Proteins&quot;&quot;&quot;</span>
    <span class="k">pass</span>
      </div>
<div class="viewcode-block" id="Promoter"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Promoter">[docs]</a><span class="k">class</span> <span class="nc">Promoter</span><span class="p">(</span><span class="n">Part</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for Parts that are Promoters&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="ConstitutivePromoter"><a class="viewcode-back" href="../../modules/index.html#aosb.core.ConstitutivePromoter">[docs]</a><span class="k">class</span> <span class="nc">ConstitutivePromoter</span><span class="p">(</span><span class="n">Promoter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for Promoters that are Constitutive Promoters&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="checkIfTypeReturnInstance"><a class="viewcode-back" href="../../modules/index.html#aosb.core.checkIfTypeReturnInstance">[docs]</a><span class="k">def</span> <span class="nf">checkIfTypeReturnInstance</span><span class="p">(</span><span class="n">possibleType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;if the parameter is a type, try to return an instance</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    possibleType - a parameter which may be an instance or a type</span>
<span class="sd">    </span>
<span class="sd">    Raises:</span>
<span class="sd">    PartInitializationError - if the parameter is a type which can not be constructed</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    An instance of the type of possibleType</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">possibleType</span><span class="p">,</span><span class="nb">type</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">possibleType</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">PartInitializationError</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">possibleType</span><span class="p">)</span> <span class="o">+</span> <span class="s">&quot; can not be initialized without Parameters.&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">possibleType</span>
    </div>
<div class="viewcode-block" id="checkAndSetMolecule"><a class="viewcode-back" href="../../modules/index.html#aosb.core.checkAndSetMolecule">[docs]</a><span class="k">def</span> <span class="nf">checkAndSetMolecule</span><span class="p">(</span><span class="n">molecule</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;checks if parameter is a class of type Molecule and returns it</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    molecule - A potential Molecule</span>
<span class="sd">    </span>
<span class="sd">    Raises:</span>
<span class="sd">    MoleculeValue - If molecule is not a class of type Molecule</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    A class of type Molecule</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="n">molecule</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">molecule</span><span class="p">,</span><span class="n">Molecule</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">molecule</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">MoleculeValueError</span><span class="p">(</span><span class="s">&quot;molecule must be a class of (sub)type Molecule&quot;</span><span class="p">)</span>
        
</div>
<div class="viewcode-block" id="NegativePromoter"><a class="viewcode-back" href="../../modules/index.html#aosb.core.NegativePromoter">[docs]</a><span class="k">class</span> <span class="nc">NegativePromoter</span><span class="p">(</span><span class="n">Promoter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for Promoters that are Negative Promoters&quot;&quot;&quot;</span>
        
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">regulatedBy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;NegativePromoter Constructor</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        regulatedBy: sets moleculeConnection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="nb">super</span><span class="p">(</span><span class="n">NegativePromoter</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">moleculeConnection</span> <span class="o">=</span> <span class="n">checkAndSetMolecule</span><span class="p">(</span><span class="n">regulatedBy</span><span class="p">)</span>
        
<div class="viewcode-block" id="NegativePromoter.getRegulatedBy"><a class="viewcode-back" href="../../modules/index.html#aosb.core.NegativePromoter.getRegulatedBy">[docs]</a>    <span class="k">def</span> <span class="nf">getRegulatedBy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">moleculeConnection</span>
           </div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">NegativePromoter</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;(regulatedBy = &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getRegulatedBy</span><span class="p">())</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
</div>
<div class="viewcode-block" id="PositivePromoter"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PositivePromoter">[docs]</a><span class="k">class</span> <span class="nc">PositivePromoter</span><span class="p">(</span><span class="n">Promoter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for Promoters that are Positive Promoters&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">regulatedBy</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;PositivePromoter Constructor</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        regulatedBy: sets moleculeConnection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="nb">super</span><span class="p">(</span><span class="n">PositivePromoter</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">moleculeConnection</span> <span class="o">=</span> <span class="n">checkAndSetMolecule</span><span class="p">(</span><span class="n">regulatedBy</span><span class="p">)</span>
    
<div class="viewcode-block" id="PositivePromoter.getRegulatedBy"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PositivePromoter.getRegulatedBy">[docs]</a>    <span class="k">def</span> <span class="nf">getRegulatedBy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">moleculeConnection</span>
           </div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">PositivePromoter</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;(regulatedBy = &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getRegulatedBy</span><span class="p">())</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
</div>
<div class="viewcode-block" id="CodingRegion"><a class="viewcode-back" href="../../modules/index.html#aosb.core.CodingRegion">[docs]</a><span class="k">class</span> <span class="nc">CodingRegion</span><span class="p">(</span><span class="n">Part</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for parts that are Coding Regions&quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">codesFor</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructor for a Coding Region Part</span>
<span class="sd">        </span>
<span class="sd">        Args: </span>
<span class="sd">        codesFor: sets moleculeConnection</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="nb">super</span><span class="p">(</span><span class="n">CodingRegion</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">moleculeConnection</span> <span class="o">=</span> <span class="n">checkAndSetMolecule</span><span class="p">(</span><span class="n">codesFor</span><span class="p">)</span>
        
<div class="viewcode-block" id="CodingRegion.getCodesFor"><a class="viewcode-back" href="../../modules/index.html#aosb.core.CodingRegion.getCodesFor">[docs]</a>    <span class="k">def</span> <span class="nf">getCodesFor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">moleculeConnection</span>
    </div>
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">CodingRegion</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__str__</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;(codesFor = &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getCodesFor</span><span class="p">())</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
    </div>
<div class="viewcode-block" id="RBS"><a class="viewcode-back" href="../../modules/index.html#aosb.core.RBS">[docs]</a><span class="k">class</span> <span class="nc">RBS</span><span class="p">(</span><span class="n">Part</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for parts that are Ribosome BindingSites&quot;&quot;&quot;</span>
    <span class="k">pass</span>
   
    </div>
<div class="viewcode-block" id="Terminator"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Terminator">[docs]</a><span class="k">class</span> <span class="nc">Terminator</span><span class="p">(</span><span class="n">Part</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for parts that are Terminators&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="Circuit"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Circuit">[docs]</a><span class="k">class</span> <span class="nc">Circuit</span><span class="p">(</span><span class="n">Part</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract class for a genetic part circuit.</span>
<span class="sd">    Will generally be used to represent a design&#39;s core concerns</span>
<span class="sd">    Additionally, a circuit can be used to represent composite parts</span>
<span class="sd">    </span>
<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    weaver: Weaver</span>
<span class="sd">        The weaver which compiles the circuit</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>
    <span class="n">weaver</span> <span class="o">=</span> <span class="bp">None</span>

    <span class="nd">@abstractmethod</span>
<div class="viewcode-block" id="Circuit.mainCircuit"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Circuit.mainCircuit">[docs]</a>    <span class="k">def</span> <span class="nf">mainCircuit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;Entry point for a circuit, analogous to &quot;main&quot; in a program</span>
<span class="sd">        Needs to be implemented by any sub class.</span>
<span class="sd">        mainCircuit will be called by the AOSB Weaver.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
        </div>
<div class="viewcode-block" id="Circuit.addPart"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Circuit.addPart">[docs]</a>    <span class="k">def</span> <span class="nf">addPart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used to add parts to the circuit by passing them on to the AOSB Weaver</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            part: The part to be added to the circuit</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">weaver</span><span class="o">.</span><span class="n">addPart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">)</span>
            </div>
<div class="viewcode-block" id="Circuit.setWeaver"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Circuit.setWeaver">[docs]</a>    <span class="k">def</span> <span class="nf">setWeaver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">weaver</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - Should not be used outside of the framework.</span>
<span class="sd">        Sets the Weaver Object of this Circuit</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            weaver: A weaver object that will be used</span>
<span class="sd">            &quot;&quot;&quot;</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">weaver</span> <span class="o">=</span> <span class="n">weaver</span>
        </div></div>
<div class="viewcode-block" id="declareNewPart"><a class="viewcode-back" href="../../modules/index.html#aosb.core.declareNewPart">[docs]</a><span class="k">def</span> <span class="nf">declareNewPart</span><span class="p">(</span><span class="n">classname</span><span class="p">,</span><span class="n">parent</span> <span class="o">=</span> <span class="n">Part</span><span class="p">,</span><span class="n">moleculeConnection</span> <span class="o">=</span> <span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a new Part type and exports it to the caller&#39;s namespace</span>
<span class="sd">    </span>
<span class="sd">    | **Arguments**</span>
<span class="sd">    | classname : string</span>
<span class="sd">    |     The name for the new type</span>
<span class="sd">    | parent : Part</span>
<span class="sd">    |     super class for the new type</span>
<span class="sd">    | moleculeConnection : Molecule</span>
<span class="sd">    |     optional, if the new Part type should be connected to a Molecule type</span>
<span class="sd">    </span>
<span class="sd">    | **Returns**</span>
<span class="sd">    | The new Part type</span>
<span class="sd">    </span>
<span class="sd">    | **Raises**</span>
<span class="sd">    | PartValueError</span>
<span class="sd">    |     If the parent is not a Part</span>
<span class="sd">    | InvalidSymbolNameError</span>
<span class="sd">    |     If classname is not a valid name for a symbol</span>
<span class="sd">    </span>
<span class="sd">    | **Warnings**</span>
<span class="sd">    | SymbolExistsWarning</span>
<span class="sd">    |     If classname already exists in the namespace</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span><span class="n">Part</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">PartValueError</span><span class="p">(</span><span class="s">&quot;parent must be of type Part&quot;</span><span class="p">)</span>   
    
    <span class="n">validnameregex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;[a-zA-Z_][a-zA-Z0-9_]*&#39;</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">classname</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">validnameregex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">classname</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">validnameregex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">classname</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">classname</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">InvalidSymbolNameError</span><span class="p">(</span><span class="s">&#39;name is not a valid symbold name&#39;</span><span class="p">)</span>     

    <span class="n">basestuple</span> <span class="o">=</span> <span class="n">parent</span><span class="p">,</span>
    <span class="n">result</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">currentframe</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
    <span class="c"># Create warning if name already exists </span>
    <span class="k">if</span> <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_globals</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">classname</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_lineno</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;Line &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;: Part &quot;</span><span class="o">+</span><span class="n">classname</span><span class="o">+</span><span class="s">&quot; already defined. Existing definition will be used&quot;</span><span class="p">,</span><span class="n">SymbolExistsWarning</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c"># 2 = one stack level above this</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_globals</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">classname</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span><span class="p">(</span><span class="n">moleculeConnection</span> <span class="o">==</span> <span class="bp">None</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">classname</span><span class="p">,</span><span class="n">basestuple</span><span class="p">,{})</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">newTypeInit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">Part</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">moleculeConnection</span> <span class="o">=</span> <span class="n">checkAndSetMolecule</span><span class="p">(</span><span class="n">moleculeConnection</span><span class="p">)</span>

            <span class="c">#this means that parent does not take a moleculeConnection parameter,</span>
            <span class="c">#but the new subtype should have one.</span>
            <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">classname</span><span class="p">,</span><span class="n">basestuple</span><span class="p">,{</span><span class="s">&#39;__init__&#39;</span><span class="p">:</span><span class="n">newTypeInit</span><span class="p">})</span>
        <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_globals</span><span class="p">[</span><span class="n">classname</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">result</span>
    
    </div>
<div class="viewcode-block" id="declareNewMolecule"><a class="viewcode-back" href="../../modules/index.html#aosb.core.declareNewMolecule">[docs]</a><span class="k">def</span> <span class="nf">declareNewMolecule</span><span class="p">(</span><span class="n">classname</span><span class="p">,</span><span class="o">*</span><span class="n">parents</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Returns a new Molecule type and exports it to the caller&#39;s namespace</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        classname: The name for the new type</span>
<span class="sd">        *parents: 0 or more Molecule super classes</span>
<span class="sd">    Returns:</span>
<span class="sd">        The new Part type</span>
<span class="sd">    Raises:</span>
<span class="sd">        MoleculeValueError: If any parent is not a Molecule</span>
<span class="sd">        InvalidSymbolNameError: If classname is not a valid name for a symbol</span>
<span class="sd">    Warnings:</span>
<span class="sd">        SymbolExistsWarning: If classname already exists in the namespace</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">validnameregex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;[a-zA-Z_][a-zA-Z0-9_]*&#39;</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">classname</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">validnameregex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">classname</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">validnameregex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">classname</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">classname</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="n">InvalidSymbolNameError</span><span class="p">(</span><span class="s">&#39;name is not a valid symbold name&#39;</span><span class="p">)</span>     
     
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">parents</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">parents</span> <span class="o">=</span> <span class="n">Molecule</span><span class="p">,</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">parent</span> <span class="ow">in</span> <span class="n">parents</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span><span class="n">Molecule</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">MoleculeValueError</span><span class="p">(</span><span class="s">&quot;All parents must be of type Molecule&quot;</span><span class="p">)</span>
    <span class="n">currentframe</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span>
    
    <span class="n">result</span> <span class="o">=</span> <span class="bp">None</span>
    
    <span class="c"># Check if classname already exists </span>
    <span class="k">if</span> <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_globals</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">classname</span><span class="p">):</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_lineno</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s">&quot;Line &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;: Molecule &quot;</span><span class="o">+</span><span class="n">classname</span><span class="o">+</span><span class="s">&quot; already defined. Existing definition will be used&quot;</span><span class="p">,</span><span class="n">SymbolExistsWarning</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="c"># 2 = one stack level above this</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_globals</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">classname</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">classname</span><span class="p">,</span><span class="n">parents</span><span class="p">,{})</span>
        <span class="n">currentframe</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_globals</span><span class="p">[</span><span class="n">classname</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span>
    <span class="k">return</span> <span class="n">result</span>


</div>
<div class="viewcode-block" id="PointCutExpressionNode"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionNode">[docs]</a><span class="k">class</span> <span class="nc">PointCutExpressionNode</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract superclass for all Nodes in a Point Cut Expression Tree</span>
<span class="sd">    </span>
<span class="sd">    A complex expression for a Point Cut, using operators such as &amp; (and),</span>
<span class="sd">    | (or) or % (concatenation) is represented as a tree of nodes</span>

<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>
    
    <span class="k">def</span> <span class="nf">__mod__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;\% - concatenates two PointCutExpressionNodes</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        other - the node on the right of self</span>
<span class="sd">        Returns:</span>
<span class="sd">        a new PointCutExpressionConcatenate node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="n">PointCutExpressionConcatenate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;\&amp; - boolean and evaluation of two PointCutExpressionNodes</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        other - the node on the right of self</span>
<span class="sd">        Returns:</span>
<span class="sd">        a new PointCutExpressionNodeAnd node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="n">PointCutExpressionAnd</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;| - boolean or evaluation of two PointCutExpressionNodes</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        other - the node on the right of self</span>
<span class="sd">        Returns:</span>
<span class="sd">        a new PointCutExpressionOr node</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="n">PointCutExpressionOr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">other</span><span class="p">)</span>
        
<div class="viewcode-block" id="PointCutExpressionNode.numberOfMatchingParts"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionNode.numberOfMatchingParts">[docs]</a>    <span class="k">def</span> <span class="nf">numberOfMatchingParts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns the number of parts the expression matches</span>
<span class="sd">        I.e. if an expression uses concatenation, then it might</span>
<span class="sd">        match the current part and a number of preceding parts.</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        part - The part at which matching starts</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        integer - how many parts were matched</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">):</span>
            <span class="k">return</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
            </div>
    <span class="nd">@abstractmethod</span>
<div class="viewcode-block" id="PointCutExpressionNode.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionNode.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Does a part match this (sub)-expression?</span>
<span class="sd">        an abstract method, must be implemented by each child</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        part - The part to be matched</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        boolean - Whether or not the part was matched</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">pass</span>
</div></div>
<div class="viewcode-block" id="PointCutExpressionOperator"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionOperator">[docs]</a><span class="k">class</span> <span class="nc">PointCutExpressionOperator</span><span class="p">(</span><span class="n">PointCutExpressionNode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract superclass of an PointCutExpression Node which is an operator</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    left - The first child of the operator</span>
<span class="sd">    right - The second child of the operator</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>
    
    <span class="n">left</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">right</span> <span class="o">=</span> <span class="bp">None</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">left</span><span class="p">,</span><span class="n">right</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a new PointCutExpresionOperator</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        left - Sets the left child node</span>
<span class="sd">        right - Sets the right child node</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">        InvalidPointCutExpressionError - </span>
<span class="sd">            If either child is not an instance of PointCutExpressionNode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left</span><span class="p">,</span><span class="n">PointCutExpressionNode</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right</span><span class="p">,</span><span class="n">PointCutExpressionNode</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidPointCutExpressionError</span><span class="p">(</span><span class="s">&quot;Invalid type used in a PointCut formula.&quot;</span><span class="p">)</span>
            
<div class="viewcode-block" id="PointCutExpressionOperator.expressionUses"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionOperator.expressionUses">[docs]</a>    <span class="k">def</span> <span class="nf">expressionUses</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nodeType</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Confirms if a certain type of node is used in the expression</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        nodeType: The type of the node whose existence is to be confirmed</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        boolean - Whether or not the node exists in the formula</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nodeType</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">,</span><span class="n">nodeType</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="p">,</span><span class="n">nodeType</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">leftresult</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="n">rightresult</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">leftresult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">expressionUses</span><span class="p">(</span><span class="n">nodeType</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">rightresult</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">expressionUses</span><span class="p">(</span><span class="n">nodeType</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">return</span> <span class="n">leftresult</span> <span class="ow">or</span> <span class="n">rightresult</span>
        </div></div>
<div class="viewcode-block" id="PointCutExpressionNot"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionNot">[docs]</a><span class="k">class</span> <span class="nc">PointCutExpressionNot</span><span class="p">(</span><span class="n">PointCutExpressionOperator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A PointCutExpressionOperator which is a Not</span>
<span class="sd">    A special case, only uses one child, acts as the inverse operator</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pointcutexpression</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a new PointCutExprresionNot</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        pointcutexpression - The expression to be negated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">pointcutexpression</span>
    
<div class="viewcode-block" id="PointCutExpressionNot.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionNot.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
    </div></div>
<div class="viewcode-block" id="PointCutExpressionOr"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionOr">[docs]</a><span class="k">class</span> <span class="nc">PointCutExpressionOr</span><span class="p">(</span><span class="n">PointCutExpressionOperator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A PointCutExpressionOperator which is an Or&quot;&quot;&quot;</span>
     
<div class="viewcode-block" id="PointCutExpressionOr.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionOr.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
    </div></div>
<div class="viewcode-block" id="PointCutExpressionAnd"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionAnd">[docs]</a><span class="k">class</span> <span class="nc">PointCutExpressionAnd</span><span class="p">(</span><span class="n">PointCutExpressionOperator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A PointCutExpressionOperator which is an And&quot;&quot;&quot;</span>
    
<div class="viewcode-block" id="PointCutExpressionAnd.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionAnd.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
    </div></div>
<div class="viewcode-block" id="PointCutExpressionConcatenate"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionConcatenate">[docs]</a><span class="k">class</span> <span class="nc">PointCutExpressionConcatenate</span><span class="p">(</span><span class="n">PointCutExpressionOperator</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A PointCutExpressionOperator which is an Concatenation&quot;&quot;&quot;</span>
    
<div class="viewcode-block" id="PointCutExpressionConcatenate.numberOfMatchingParts"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionConcatenate.numberOfMatchingParts">[docs]</a>    <span class="k">def</span> <span class="nf">numberOfMatchingParts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition</span>
<span class="sd">        </span>
<span class="sd">        This child overrides it, since a concatenation operator is</span>
<span class="sd">        a node in the expression at which more than one part can be</span>
<span class="sd">        matched. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">numberOfMatchingParts</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">before</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">numberOfMatchingParts</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">0</span>
        
            </div>
<div class="viewcode-block" id="PointCutExpressionConcatenate.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutExpressionConcatenate.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">before</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">right</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
            </div></div>
<div class="viewcode-block" id="checkBaseClassesMatch"><a class="viewcode-back" href="../../modules/index.html#aosb.core.checkBaseClassesMatch">[docs]</a><span class="k">def</span> <span class="nf">checkBaseClassesMatch</span><span class="p">(</span><span class="n">bases</span><span class="p">,</span><span class="n">typename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Recursively check if the name of the types in bases (or parents) are equal to typename</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">    bases - A tuple of types</span>
<span class="sd">    typename : str - A name of a type</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">    True if any of the names of types in bases or any of their parent bases equals typename,</span>
<span class="sd">        False otherwise</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="k">for</span> <span class="n">baseClass</span> <span class="ow">in</span> <span class="n">bases</span><span class="p">:</span>             
        <span class="k">if</span> <span class="p">(</span><span class="n">typename</span> <span class="o">==</span> <span class="n">baseClass</span><span class="o">.</span><span class="n">__name__</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">checkBaseClassesMatch</span><span class="p">(</span><span class="n">baseClass</span><span class="o">.</span><span class="n">__bases__</span><span class="p">,</span><span class="n">typename</span><span class="p">):</span>
                <span class="k">return</span> <span class="bp">True</span>

</div>
<div class="viewcode-block" id="PartSignatureElement"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PartSignatureElement">[docs]</a><span class="k">class</span> <span class="nc">PartSignatureElement</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A building block of a Part Signature</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    qualifier : ANY / SUBCLASS / CLASSONLY</span>
<span class="sd">        Whether the element should match precisely, all subclasses or uses a wildcard</span>
<span class="sd">    element : str - The string of the element (without a qualifier)</span>
<span class="sd">    inverse : boolean - Whether the element has been negated</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">ANY</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">SUBCLASS</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">CLASSONLY</span> <span class="o">=</span> <span class="mi">3</span>
    
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a new PartSignatureElement </span>
<span class="sd">        Analyzes signature and sets internal attributes</span>
<span class="sd">        </span>
<span class="sd">        Args: signature - the part of the Part signature for this element</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">inverse</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        
        <span class="k">if</span> <span class="n">signature</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;!&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inverse</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
            
        <span class="k">if</span> <span class="n">signature</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;*&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">=</span> <span class="n">PartSignatureElement</span><span class="o">.</span><span class="n">ANY</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">signature</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">signature</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;+&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">=</span> <span class="n">PartSignatureElement</span><span class="o">.</span><span class="n">SUBCLASS</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">signature</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">=</span> <span class="n">PartSignatureElement</span><span class="o">.</span><span class="n">CLASSONLY</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">signature</span>
    
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">qualifier</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ANY</span><span class="p">:</span>
            <span class="n">qualifier</span> <span class="o">=</span> <span class="s">&#39;*&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUBCLASS</span><span class="p">:</span>
            <span class="n">qualifier</span> <span class="o">=</span> <span class="s">&#39;+&#39;</span>   
        <span class="n">exclamation</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inverse</span><span class="p">:</span>
            <span class="n">exclamation</span> <span class="o">=</span> <span class="s">&#39;!&#39;</span>         
        <span class="k">return</span> <span class="n">exclamation</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="o">+</span><span class="n">qualifier</span>
        
<div class="viewcode-block" id="PartSignatureElement.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PartSignatureElement.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>
       
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inverse</span><span class="p">:</span>
            <span class="k">return</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">__match</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__match</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        </div>
    <span class="k">def</span> <span class="nf">__match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;internal match method, matching without inverse&quot;&quot;&quot;</span>
        
        <span class="n">objectName</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">Molecule</span><span class="p">):</span>
                <span class="n">objectName</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">__name__</span>
                <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">objectName</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span>
            
        
        <span class="k">if</span> <span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">CLASSONLY</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUBCLASS</span><span class="p">))</span> <span class="ow">and</span> <span class="p">(</span><span class="n">objectName</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
       
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ANY</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">objectName</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">True</span>
           
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">SUBCLASS</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">checkBaseClassesMatch</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__bases__</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">element</span><span class="p">)</span>
                   
        <span class="k">return</span> <span class="bp">False</span>
        
    </div>
<div class="viewcode-block" id="MoleculeSignature"><a class="viewcode-back" href="../../modules/index.html#aosb.core.MoleculeSignature">[docs]</a><span class="k">class</span> <span class="nc">MoleculeSignature</span><span class="p">(</span><span class="n">PartSignatureElement</span><span class="p">):</span> 
    <span class="sd">&quot;&quot;&quot;A PartSignatureElement that is a Molecule Signature</span>
<span class="sd">    Overloads some methods, since MoleculeSignature is used by the user for</span>
<span class="sd">    Molecule Type Advice - unlike PartSignatureElement, which is internal</span>
<span class="sd">    &quot;&quot;&quot;</span>
       
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">signature</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a new MoleculeSignature</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        signature : str - The string signature to be cast to a MoleculeSignature</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">        InvalidSignatureError - If signature does not adhere to the format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">signatureRE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;!?([a-zA-Z_][a-zA-Z0-9_]*[\+\*]?|\*)&#39;</span><span class="p">)</span>
        
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">signatureRE</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">signature</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="n">InvalidSignatureError</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSignatureError</span><span class="p">()</span>
        
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MoleculeSignature</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>
         
<div class="viewcode-block" id="MoleculeSignature.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.MoleculeSignature.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">qualifier</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">ANY</span> <span class="ow">and</span> <span class="n">obj</span> <span class="o">==</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">inverse</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MoleculeSignature</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
 
    </div></div>
<div class="viewcode-block" id="PartSignature"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PartSignature">[docs]</a><span class="k">class</span> <span class="nc">PartSignature</span><span class="p">(</span><span class="n">PointCutExpressionNode</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A PartSignature, used in PointCut expressions or directly for Type Advice</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    namespace : PartSignatureElement - The namespace part of the signature</span>
<span class="sd">    part : PartSignatureElement - The &quot;part&quot; part of the signature</span>
<span class="sd">    molcule : PartSignatureElement - The molecule part of the signature</span>
<span class="sd">    nomolecule : Boolean - </span>
<span class="sd">        If the PartSignature explicitly should not match parts with molecules</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">signature</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a new PartSignature</span>
<span class="sd">        Analyzes signature and sets internal attributes</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        signature : str - The string signature to be cast to a PartSignature</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">        InvalidSignatureError - If signature does not adhere to the format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">molecule</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nomolecule</span> <span class="o">=</span> <span class="bp">False</span>
        
        <span class="c">#should be of format: Circuit.Part(Molecule)&quot; (Molecule) is optional#</span>
        <span class="n">typeErrorMessage</span> <span class="o">=</span> <span class="s">&quot;signature must be of type String and adhere to PointCut / PartSignature Format&quot;</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidSignatureError</span><span class="p">(</span><span class="n">typeErrorMessage</span><span class="p">)</span>
        
        
        <span class="c"># using a regular expression to make sure the signature is of a valid format</span>
        <span class="n">signatureRE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;!?(([a-zA-Z_][a-zA-Z0-9_]*[\+\*]?)|\*)\.!?(([a-zA-Z_][a-zA-Z0-9_]*[\+\*]?)|\*)(\(!?(([a-zA-Z_][a-zA-Z0-9_]*[\+\*]?)|\*)?\))?&#39;</span><span class="p">)</span> 
        
        
        <span class="c"># regular expression has to match entire length of string</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">signatureRE</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">signature</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="n">InvalidSignatureError</span><span class="p">(</span><span class="n">typeErrorMessage</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSignatureError</span><span class="p">(</span><span class="n">typeErrorMessage</span><span class="p">)</span>
        
        <span class="c">#split signature into components</span>
        <span class="n">signaturePartRE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;!?[a-zA-Z_][a-zA-Z0-9_]*[\+\*]?|\*&#39;</span><span class="p">)</span>
        
        <span class="n">splitSignature</span> <span class="o">=</span> <span class="n">signaturePartRE</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>
        
        
        <span class="c">#Circuit Part</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">PartSignatureElement</span><span class="p">(</span><span class="n">splitSignature</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        
        <span class="c">#Part ... Part</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">part</span> <span class="o">=</span> <span class="n">PartSignatureElement</span><span class="p">(</span><span class="n">splitSignature</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                
        <span class="n">signatureMoleculePartRE</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;\(!?(([a-zA-Z_][a-zA-Z0-9_]*[\+\*]?)|\*)?\)&#39;</span><span class="p">)</span>
        
        <span class="n">moleculePartMatch</span> <span class="o">=</span> <span class="n">signatureMoleculePartRE</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">moleculePartMatch</span> <span class="o">!=</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">moleculePart</span> <span class="o">=</span> <span class="n">moleculePartMatch</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">moleculePart</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nomolecule</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">molecule</span> <span class="o">=</span> <span class="n">MoleculeSignature</span><span class="p">(</span><span class="n">moleculePart</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">nomolecule</span> <span class="o">=</span> <span class="bp">False</span>
                
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">nomolecule</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">molecule</span> <span class="o">=</span> <span class="n">MoleculeSignature</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span>
        
    
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">firsthalf</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">namespace</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;.&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">part</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nomolecule</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">firsthalf</span> <span class="o">+</span> <span class="s">&#39;()&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">firsthalf</span> <span class="o">+</span> <span class="s">&#39;(&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">molecule</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
        
<div class="viewcode-block" id="PartSignature.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PartSignature.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="n">Part</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">PartValueError</span><span class="p">(</span><span class="s">&quot;Part to match must be instance of type Part&quot;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">namespace</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">namespace</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">part</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">nomolecule</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">result</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">molecule</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">moleculeConnection</span><span class="p">)</span>
        
        <span class="k">return</span> <span class="n">result</span>        
    
    
    </div></div>
<div class="viewcode-block" id="PointCut"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCut">[docs]</a><span class="k">class</span> <span class="nc">PointCut</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A PointCut to select Join Points in the genetic parts execution flow</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    operator : BEFORE / AFTER / REPLACE </span>
<span class="sd">        - The operator for this PointCut</span>
<span class="sd">    signature : PartSignature</span>
<span class="sd">    &quot;&quot;&quot;</span>   
    <span class="n">BEFORE</span> <span class="o">=</span> <span class="mi">11</span>
    <span class="n">AFTER</span> <span class="o">=</span> <span class="mi">22</span>
    <span class="n">REPLACE</span> <span class="o">=</span> <span class="mi">33</span>
    
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">signature</span><span class="p">,</span> <span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Construct a new PointCut</span>
<span class="sd">        </span>
<span class="sd">        Args: </span>
<span class="sd">        signature - A PointCutSignature or a string that will be cast to PointCutSignature</span>
<span class="sd">        operator - The operator</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="bp">None</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span><span class="n">PointCutExpressionNode</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">PartSignature</span><span class="p">(</span><span class="n">signature</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">checkAndSetOperator</span><span class="p">(</span><span class="n">operator</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">operator</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEFORE</span><span class="p">:</span>
            <span class="n">operator</span> <span class="o">=</span> <span class="s">&#39;BEFORE&#39;</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">AFTER</span><span class="p">:</span>
            <span class="n">operator</span> <span class="o">=</span> <span class="s">&#39;AFTER&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">operator</span> <span class="o">=</span> <span class="s">&#39;REPLACE&#39;</span>
        
        <span class="k">return</span> <span class="s">&#39;PointCut(</span><span class="se">\&#39;</span><span class="s">&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">)</span><span class="o">+</span><span class="s">&#39;</span><span class="se">\&#39;</span><span class="s">,&#39;</span><span class="o">+</span><span class="n">operator</span><span class="o">+</span><span class="s">&#39;)&#39;</span>
    
<div class="viewcode-block" id="PointCut.match"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCut.match">[docs]</a>    <span class="k">def</span> <span class="nf">match</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">partObject</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;see PointCutExpressionNode definition&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">partObject</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="PointCut.checkAndSetOperator"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCut.checkAndSetOperator">[docs]</a>    <span class="k">def</span> <span class="nf">checkAndSetOperator</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">operator</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set the internal operator attribute, if the parameter is a valid operator</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        operator - The operator to be confirmed</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">        InvalidPointCutOperatorError - if the operator is invalid</span>
<span class="sd">            (can be dependent on the signature)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEFORE</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">AFTER</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">REPLACE</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">operator</span> <span class="o">=</span> <span class="n">operator</span>
            <span class="k">if</span><span class="p">(</span><span class="n">operator</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">BEFORE</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span><span class="n">PointCutExpressionOperator</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">expressionUses</span><span class="p">(</span><span class="n">PointCutExpressionConcatenate</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="n">InvalidPointCutOperatorError</span><span class="p">(</span><span class="s">&#39;PointCut Operator can not be BEFORE if PartSignature uses concatenation.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidPointCutOperatorError</span><span class="p">(</span><span class="s">&quot;operator must be of type PointCut.BEFORE / AFTER / REPLACE&quot;</span><span class="p">)</span>

</div></div>
<div class="viewcode-block" id="PointCutContext"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutContext">[docs]</a><span class="k">class</span> <span class="nc">PointCutContext</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Container for context at a PointCut</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    within - A stack of the circuits / aspects that within which the PointCut was matched</span>
<span class="sd">    part - The part matched by the PointCut&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">within</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">within</span> <span class="o">=</span> <span class="n">within</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">part</span> <span class="o">=</span> <span class="n">part</span>
        
<div class="viewcode-block" id="PointCutContext.isWithin"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PointCutContext.isWithin">[docs]</a>    <span class="k">def</span> <span class="nf">isWithin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Checks if the parameter (a circuit or aspect) is on the within stack</span>
<span class="sd">        Arguments:</span>
<span class="sd">        obj : Circuit / Aspect - The object that is to be found on the stack</span>
<span class="sd">        </span>
<span class="sd">        Returns</span>
<span class="sd">        Boolean - true if obj is on the within stack</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isWithinRecursive</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">within</span><span class="p">))</span>
    </div>
    <span class="k">def</span> <span class="nf">__isWithinRecursive</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">obj</span><span class="p">,</span><span class="n">index</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">(</span><span class="n">obj</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">within</span><span class="p">[</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">__isWithinRecursive</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span><span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">False</span>
        
</div>
<div class="viewcode-block" id="Advice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Advice">[docs]</a><span class="k">class</span> <span class="nc">Advice</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Container for Advice</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    precedence : int - High precedence advice have execution priority over low precedence</span>
<span class="sd">        - MINPRECEDENCE &lt;= precedence &lt;= MAXPRECEDENCE is the valid range</span>
<span class="sd">    pointcut : PointCut</span>
<span class="sd">    adviceMethod : method - The method to be executed at the advice</span>
<span class="sd">        - must have 2 parameters: self and PointCutContext</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">MINPRECEDENCE</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">MAXPRECEDENCE</span> <span class="o">=</span> <span class="mi">100</span>
    
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pointcut</span><span class="p">,</span> <span class="n">adviceMethod</span><span class="p">,</span> <span class="n">precedence</span> <span class="o">=</span> <span class="n">MINPRECEDENCE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a new Advice object, setting internal state</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        pointcut - The PointCut to be set</span>
<span class="sd">        adviceMethod - The adviceMethod to be set</span>
<span class="sd">        precedence - The precedence to be set</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">        InvalidPointCutError</span>
<span class="sd">        InvalidAdviceMethodError - If argument is not a method or takes wrong</span>
<span class="sd">            number of parameters (must take self and PointCutContext object)</span>
<span class="sd">        PrecedenceOutOfRangeError - If precedence &gt; MAXPRECEDENCE or</span>
<span class="sd">                                        precedence &lt; MINPRECEDENCE</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">pointcut</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adviceMethod</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precedence</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MINPRECEDENCE</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pointcut</span><span class="p">,</span><span class="n">PointCut</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">InvalidPointCutError</span><span class="p">(</span><span class="s">&quot;pointcut must be of type PointCut&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pointcut</span> <span class="o">=</span> <span class="n">pointcut</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">adviceMethod</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getargspec</span><span class="p">(</span><span class="n">adviceMethod</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidAdviceMethodError</span><span class="p">(</span><span class="s">&quot;adviceMethod must be a method with 2 parameters (self, PointCutContext)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adviceMethod</span> <span class="o">=</span> <span class="n">adviceMethod</span>
        
        <span class="k">if</span> <span class="n">precedence</span> <span class="o">&lt;</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MINPRECEDENCE</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">precedence</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">MAXPRECEDENCE</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">PrecedenceOutOfRangeError</span><span class="p">(</span><span class="s">&quot;Advice Precedence must be between &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MINPRECEDENCE</span><span class="p">)</span><span class="o">+</span><span class="s">&quot; and &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">MAXPRECEDENCE</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">precedence</span> <span class="o">=</span> <span class="n">precedence</span> 
        
</div>
<div class="viewcode-block" id="TypeAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.TypeAdvice">[docs]</a><span class="k">class</span> <span class="nc">TypeAdvice</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Container for TypeAdvice</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    signature : PartSignature or MoleculeSignature</span>
<span class="sd">    typeaddition : method or attribute to be added to the type</span>
<span class="sd">    name : The name the new typeaddition should have in the new type</span>
<span class="sd">    aspect : Aspect which declares this TypeAdvice</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
   
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">signature</span><span class="p">,</span> <span class="n">typeaddition</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">aspect</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Constructs a new TypeAdvice</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        signature - PartSignature / MoleculeSignature to be set</span>
<span class="sd">        typeaddition - attribute to be set</span>
<span class="sd">        name : str - attribute to be set</span>
<span class="sd">        aspect : Aspect - attribute to be set</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">        InvalidSignatureError - </span>
<span class="sd">            If signature not instance of PartSignature or MoleculeSignature</span>
<span class="sd">        InvalidSymbolNameError -</span>
<span class="sd">            If name is not a valid name for a symbol</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeaddition</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspect</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s">&#39;&#39;</span>
        
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span><span class="n">PartSignature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span><span class="n">MoleculeSignature</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signature</span> <span class="o">=</span> <span class="n">signature</span><span class="p">;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidSignatureError</span><span class="p">(</span><span class="s">&#39;Signature parameter for TypeAdvice must be of type PartSignature or MoleculeSignature&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeaddition</span> <span class="o">=</span> <span class="n">typeaddition</span><span class="p">;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspect</span> <span class="o">=</span> <span class="n">aspect</span>
        
        <span class="n">validnameregex</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">&#39;[a-zA-Z_][a-zA-Z0-9_]*&#39;</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">validnameregex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">validnameregex</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="p">()</span> <span class="o">==</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="n">InvalidSymbolNameError</span><span class="p">(</span><span class="s">&#39;name is not a valid symbold name&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        
<div class="viewcode-block" id="TypeAdvice.isPartAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.TypeAdvice.isPartAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">isPartAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns True if TypeAdvice is for Part, False otherwise&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span><span class="n">PartSignature</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="TypeAdvice.isMoleculeAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.TypeAdvice.isMoleculeAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">isMoleculeAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns True if TypeAdvice is for Molecule, False otherwise&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signature</span><span class="p">,</span><span class="n">MoleculeSignature</span><span class="p">)</span>
        
        </div></div>
<div class="viewcode-block" id="Aspect"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect">[docs]</a><span class="k">class</span> <span class="nc">Aspect</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Abstract class for an Aspect</span>
<span class="sd">    Will generally be used to represent a design&#39;s cross-cutting concerns</span>
<span class="sd">    </span>
<span class="sd">    Notes</span>
<span class="sd">    -----    </span>
<span class="sd">    Most implement mainAspect method</span>
<span class="sd">    </span>
<span class="sd">    Attributes</span>
<span class="sd">    ----------</span>
<span class="sd">    weaver: Weaver</span>
<span class="sd">        The weaver which compiles the aspect</span>
<span class="sd">    adviceList - A list of all advice this aspect declares</span>
<span class="sd">    typeAdviceList - A list of all type advice this aspect declares</span>
<span class="sd">    weaverOutputList - A list of all type advice for the WeaverOutput</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">__metaclass__</span> <span class="o">=</span> <span class="n">ABCMeta</span>
    
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">adviceList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">typeAdviceList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutputList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weaver</span> <span class="o">=</span> <span class="bp">None</span>
    
<div class="viewcode-block" id="Aspect.addPart"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.addPart">[docs]</a>    <span class="k">def</span> <span class="nf">addPart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Used to add parts to the design by passing them on to the AOSB Weaver</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            part: The part to be added to the circuit</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weaver</span><span class="o">.</span><span class="n">addPart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">)</span>
                </div>
<div class="viewcode-block" id="Aspect.setWeaver"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.setWeaver">[docs]</a>    <span class="k">def</span> <span class="nf">setWeaver</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">weaver</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - Should not be used outside of the framework.</span>
<span class="sd">        Sets the Weaver Object of this Circuit</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            weaver: A weaver object that will be used</span>
<span class="sd">            &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weaver</span> <span class="o">=</span> <span class="n">weaver</span>
    </div>
<div class="viewcode-block" id="Aspect.addAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.addAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">addAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pointcut</span><span class="p">,</span><span class="n">adviceMethod</span><span class="p">,</span><span class="n">precedence</span> <span class="o">=</span> <span class="n">Advice</span><span class="o">.</span><span class="n">MINPRECEDENCE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Declare a new advice in the aspect</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            pointcut - The pointcut for the advice</span>
<span class="sd">            adviceMethod - The method to be executed at the pointcut</span>
<span class="sd">                should be a method bound to this aspect, with second parameter</span>
<span class="sd">                expecting a PointCutContext object</span>
<span class="sd">            precedence : integer (optional) - set precedence of advice,</span>
<span class="sd">                see notes on Advice.precedence</span>
<span class="sd">                </span>
<span class="sd">        Notes:</span>
<span class="sd">            addAdvice constructs an Advice object. Further information thus</span>
<span class="sd">            can be found there.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">adviceList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Advice</span><span class="p">(</span><span class="n">pointcut</span><span class="p">,</span><span class="n">adviceMethod</span><span class="p">,</span><span class="n">precedence</span><span class="p">))</span>
    </div>
<div class="viewcode-block" id="Aspect.addTypeAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.addTypeAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">addTypeAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">signature</span><span class="p">,</span><span class="n">typeaddition</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Declare a type advice in the aspect</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            signature - The signature for the type advice</span>
<span class="sd">            typeaddition - The attribute / method to be added to the type</span>
<span class="sd">            name: str - The name for the typeaddition in the new type</span>
<span class="sd">            </span>
<span class="sd">        Notes:</span>
<span class="sd">            addTypeAdvice constructs an TypeAdvice object.</span>
<span class="sd">            Further information thus can be found there.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">typeAdviceList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">TypeAdvice</span><span class="p">(</span><span class="n">signature</span><span class="p">,</span><span class="n">typeaddition</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="bp">self</span><span class="p">))</span>
        </div>
<div class="viewcode-block" id="Aspect.addWeaverOutput"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.addWeaverOutput">[docs]</a>    <span class="k">def</span> <span class="nf">addWeaverOutput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">outputmethod</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Declare a new weaver output target </span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">            outputMethod - The method to be added to the WeaverOutput</span>
<span class="sd">            </span>
<span class="sd">        Raises:</span>
<span class="sd">            InvalidWeaverOutputMethodError -</span>
<span class="sd">                If outputmethod is not a method or has wrong number of parameters</span>
<span class="sd">                (needs to accept self and a WeaverOutput reference)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">if</span> <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">outputmethod</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">getargspec</span><span class="p">(</span><span class="n">outputmethod</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">InvalidWeaverOutputMethodError</span><span class="p">(</span><span class="s">&quot;outputmethod must be a method with 2 parameters (self, WeaverOutput)&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutputList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outputmethod</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Aspect.getAdviceList"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.getAdviceList">[docs]</a>    <span class="k">def</span> <span class="nf">getAdviceList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns adviceList&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">adviceList</span>
</div>
<div class="viewcode-block" id="Aspect.getTypeAdviceList"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.getTypeAdviceList">[docs]</a>    <span class="k">def</span> <span class="nf">getTypeAdviceList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns typeAdviceList&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">typeAdviceList</span>
        </div>
<div class="viewcode-block" id="Aspect.getWeaverOutputList"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.getWeaverOutputList">[docs]</a>    <span class="k">def</span> <span class="nf">getWeaverOutputList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns weaverOutputList&quot;&quot;&quot;</span>
        
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutputList</span>
    </div>
    <span class="nd">@abstractmethod</span>
<div class="viewcode-block" id="Aspect.mainAspect"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Aspect.mainAspect">[docs]</a>    <span class="k">def</span> <span class="nf">mainAspect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;Entry point for an aspect, analogous to &quot;main&quot; in a program</span>
<span class="sd">        Needs to be implemented by any sub class.</span>
<span class="sd">        mainAspect will be called by the AOSB Weaver.&quot;&quot;&quot;</span>
        <span class="k">pass</span>
</div></div>
<div class="viewcode-block" id="Weaver"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver">[docs]</a><span class="k">class</span> <span class="nc">Weaver</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The &quot;compiler&quot; that weaves core concerns (circuits) and cross-cutting</span>
<span class="sd">    concerns (aspects) and creates a woven execution flow of parts</span>
<span class="sd">    </span>
<span class="sd">    Attributes:</span>
<span class="sd">    partList - The current list of parts</span>
<span class="sd">    moleculeList - The current list of molecules</span>
<span class="sd">    beforeAndReplaceAdviceList - List of all before and replace advice to be woven</span>
<span class="sd">    afterAdviceList - List of all after advice to be woven</span>
<span class="sd">    partTypeAdviceList - List of all part type advice</span>
<span class="sd">    moleculeTypeAdviceList - List of all molecule type advice</span>
<span class="sd">    circuit - The main circuit</span>
<span class="sd">    aspects - The list of all aspects to be woven</span>
<span class="sd">    weaverOutput : WeaverOutput - The &quot;compiled&quot; result</span>
<span class="sd">    &quot;&quot;&quot;</span>
     
    
    
<div class="viewcode-block" id="Weaver.WeaverOutput"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.WeaverOutput">[docs]</a>    <span class="k">class</span> <span class="nc">WeaverOutput</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> 
        <span class="sd">&quot;&quot;&quot;Container for the woven result of the Weaver</span>
<span class="sd">        </span>
<span class="sd">        Attributes:</span>
<span class="sd">        partList - finished ordered list of parts in the design</span>
<span class="sd">        moleculeList - list of all molecules in the design</span>
<span class="sd">        &quot;&quot;&quot;</span>
         
        <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">&#39;+&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">)))</span>
            </div>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">circuit</span><span class="p">,</span><span class="o">*</span><span class="n">aspects</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Sets of the weaver and compiles the design</span>
<span class="sd">        </span>
<span class="sd">        Attributes:</span>
<span class="sd">        circuit : Circuit - The main circuit to be set</span>
<span class="sd">        *aspects : Aspect - list of aspects to be set</span>
<span class="sd">        </span>
<span class="sd">        Raises:</span>
<span class="sd">        CircuitValueError - If circuit is invalid</span>
<span class="sd">        AspectValueError - If any aspect is invalid&quot;&quot;&quot;</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">partList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">moleculeList</span> <span class="o">=</span> <span class="p">[]</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">beforeAndReplaceAdviceList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">afterAdviceList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">partTypeAdviceList</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">moleculeTypeAdviceList</span> <span class="o">=</span> <span class="p">[]</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span> <span class="o">=</span> <span class="bp">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aspects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withinStack</span> <span class="o">=</span> <span class="p">[]</span>
    
        <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutput</span> <span class="o">=</span> <span class="bp">None</span>
                
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">circuit</span><span class="p">,</span><span class="n">Circuit</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">CircuitValueError</span><span class="p">(</span><span class="s">&quot;circuit must be a class of type Circuit.&quot;</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span> <span class="o">=</span> <span class="n">circuit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">setWeaver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        
        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="n">aspects</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">aspect</span><span class="p">,</span><span class="n">Aspect</span><span class="p">):</span>
                <span class="k">raise</span> <span class="n">AspectValueError</span><span class="p">(</span><span class="s">&quot;all aspects must be classes of type Aspect.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">aspects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">aspect</span><span class="p">())</span>
        
        
        <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutput</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">WeaverOutput</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">readAspectsConstructAdviceLists</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">sortAdviceList</span><span class="p">()</span>
        
        <span class="c">#  weaving is kicked off here</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">circuit</span><span class="o">.</span><span class="n">mainCircuit</span><span class="p">()</span>  
        
        <span class="bp">self</span><span class="o">.</span><span class="n">constructMoleculeListAndAddTypeAdvice</span><span class="p">()</span>
                
        <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutput</span><span class="o">.</span><span class="n">partList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partList</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutput</span><span class="o">.</span><span class="n">moleculeList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">moleculeList</span>
        
<div class="viewcode-block" id="Weaver.sortAdviceList"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.sortAdviceList">[docs]</a>    <span class="k">def</span> <span class="nf">sortAdviceList</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - sorts the advice lists by precedence&quot;&quot;&quot;</span>
        
        <span class="k">def</span> <span class="nf">sortKey</span><span class="p">(</span><span class="n">advice</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">advice</span><span class="o">.</span><span class="n">precedence</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">beforeAndReplaceAdviceList</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">beforeAndReplaceAdviceList</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">sortKey</span><span class="p">,</span><span class="n">reverse</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">afterAdviceList</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">afterAdviceList</span><span class="p">,</span> <span class="n">key</span> <span class="o">=</span> <span class="n">sortKey</span><span class="p">)</span>
    </div>
<div class="viewcode-block" id="Weaver.constructMoleculeListAndAddTypeAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.constructMoleculeListAndAddTypeAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">constructMoleculeListAndAddTypeAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - constructs list of Molecules in design and adds their type advice&quot;&quot;&quot;</span>

        <span class="c"># construct moleculeList</span>
        <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">part</span><span class="o">.</span><span class="n">moleculeConnection</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">part</span><span class="o">.</span><span class="n">moleculeConnection</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">moleculeList</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">moleculeList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="o">.</span><span class="n">moleculeConnection</span><span class="p">)</span>
                    
        <span class="c"># add type advice to molecules</span>
        <span class="k">for</span> <span class="n">molecule</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">moleculeList</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">typeAdvice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">moleculeTypeAdviceList</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">typeAdvice</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">molecule</span><span class="p">):</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">molecule</span><span class="p">,</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">typeaddition</span><span class="p">)</span>
        </div>
<div class="viewcode-block" id="Weaver.readAspectsConstructAdviceLists"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.readAspectsConstructAdviceLists">[docs]</a>    <span class="k">def</span> <span class="nf">readAspectsConstructAdviceLists</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - initializes aspects and constructs all advice lists&quot;&quot;&quot;</span>
        
        <span class="k">for</span> <span class="n">aspect</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">aspects</span><span class="p">:</span>
            <span class="n">aspect</span><span class="o">.</span><span class="n">setWeaver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="n">aspect</span><span class="o">.</span><span class="n">mainAspect</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">advice</span> <span class="ow">in</span> <span class="n">aspect</span><span class="o">.</span><span class="n">getAdviceList</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">advice</span><span class="o">.</span><span class="n">pointcut</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="n">PointCut</span><span class="o">.</span><span class="n">AFTER</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">afterAdviceList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">advice</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">beforeAndReplaceAdviceList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">advice</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">typeAdvice</span> <span class="ow">in</span> <span class="n">aspect</span><span class="o">.</span><span class="n">getTypeAdviceList</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">typeAdvice</span><span class="o">.</span><span class="n">isPartAdvice</span><span class="p">():</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">partTypeAdviceList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">typeAdvice</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">moleculeTypeAdviceList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">typeAdvice</span><span class="p">)</span>
    
            <span class="n">weaverOutput</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutput</span> <span class="c"># to make weaverOutput visible to closure scope</span>
    
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">aspect</span><span class="o">.</span><span class="n">getWeaverOutputList</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c"># this aspect wants to add a new weaver output target</span>
                <span class="c"># TODO check if a similarly named output target already exists and raise </span>
                <span class="c"># useful exception (containing name of clashed method, name of advice)</span>
                <span class="k">for</span> <span class="n">outputMethod</span> <span class="ow">in</span> <span class="n">aspect</span><span class="o">.</span><span class="n">getWeaverOutputList</span><span class="p">():</span>
                    <span class="k">def</span> <span class="nf">outputMethodWrapper</span><span class="p">(</span><span class="n">method</span><span class="p">):</span>
                        <span class="k">def</span> <span class="nf">outputMethodWrapperClosure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                            <span class="k">return</span> <span class="n">method</span><span class="p">(</span><span class="n">weaverOutput</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">outputMethodWrapperClosure</span>
                    
                    <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weaverOutput</span><span class="p">,</span><span class="n">outputMethod</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span><span class="n">outputMethodWrapper</span><span class="p">(</span><span class="n">outputMethod</span><span class="p">),</span><span class="n">aspect</span><span class="p">))</span>
        </div>
<div class="viewcode-block" id="Weaver.addPartTypeAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.addPartTypeAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">addPartTypeAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - adds type advice to a part&quot;&quot;&quot;</span>
        
        <span class="k">for</span> <span class="n">typeAdvice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">partTypeAdviceList</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">typeAdvice</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">):</span>
                <span class="c"># TODO check for name clashes...</span>
                <span class="k">if</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">typeaddition</span><span class="p">):</span>
                    <span class="k">def</span> <span class="nf">adviceMethodWrapper</span><span class="p">(</span><span class="n">method</span><span class="p">):</span>
                        <span class="k">def</span> <span class="nf">adviceMethodWrapperClosure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                            <span class="k">return</span> <span class="n">method</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
                        <span class="k">return</span> <span class="n">adviceMethodWrapperClosure</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">types</span><span class="o">.</span><span class="n">MethodType</span><span class="p">(</span><span class="n">adviceMethodWrapper</span><span class="p">(</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">typeaddition</span><span class="p">),</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">aspect</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">setattr</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">typeAdvice</span><span class="o">.</span><span class="n">typeaddition</span><span class="p">)</span>
                    </div>
<div class="viewcode-block" id="Weaver.runBeforeAndReplaceAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.runBeforeAndReplaceAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">runBeforeAndReplaceAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callingObject</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - runs Before and Replace Advice of a part</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        part - The part for which the advice matches</span>
<span class="sd">        callingObject - the circuit or advice which added the part</span>
<span class="sd">        </span>
<span class="sd">        Returns:</span>
<span class="sd">        &quot;continue&quot;</span>
<span class="sd">        True - If part should still be added</span>
<span class="sd">        False - If part has been replaced and remaining after advice executed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="k">for</span> <span class="n">advice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">beforeAndReplaceAdviceList</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">part</span><span class="o">.</span><span class="n">before</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                
            <span class="k">if</span> <span class="n">advice</span><span class="o">.</span><span class="n">pointcut</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">):</span>
                <span class="k">if</span><span class="p">(</span><span class="n">advice</span><span class="o">.</span><span class="n">pointcut</span><span class="o">.</span><span class="n">operator</span> <span class="o">==</span> <span class="n">PointCut</span><span class="o">.</span><span class="n">REPLACE</span><span class="p">):</span>
                    <span class="n">numberOfMatchingParts</span> <span class="o">=</span> <span class="n">advice</span><span class="o">.</span><span class="n">pointcut</span><span class="o">.</span><span class="n">signature</span><span class="o">.</span><span class="n">numberOfMatchingParts</span><span class="p">(</span><span class="n">part</span><span class="p">)</span> 
                    <span class="k">while</span> <span class="n">numberOfMatchingParts</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> 
                        <span class="n">numberOfMatchingParts</span> <span class="o">-=</span> <span class="mi">1</span>
                    <span class="n">advice</span><span class="o">.</span><span class="n">adviceMethod</span><span class="p">(</span><span class="n">PointCutContext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">withinStack</span><span class="p">,</span><span class="n">part</span><span class="p">))</span> 
                        
                    <span class="bp">self</span><span class="o">.</span><span class="n">runAfterAdvice</span><span class="p">(</span><span class="n">callingObject</span><span class="p">,</span><span class="n">part</span><span class="p">,</span><span class="n">advice</span><span class="o">.</span><span class="n">precedence</span><span class="p">)</span>
                    <span class="k">return</span> <span class="bp">False</span>
                <span class="n">advice</span><span class="o">.</span><span class="n">adviceMethod</span><span class="p">(</span><span class="n">PointCutContext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">withinStack</span><span class="p">,</span><span class="n">part</span><span class="p">))</span>
        
        <span class="k">return</span> <span class="bp">True</span>        
    </div>
<div class="viewcode-block" id="Weaver.runAfterAdvice"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.runAfterAdvice">[docs]</a>    <span class="k">def</span> <span class="nf">runAfterAdvice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callingObject</span><span class="p">,</span><span class="n">part</span><span class="p">,</span><span class="n">precedence</span> <span class="o">=</span> <span class="n">Advice</span><span class="o">.</span><span class="n">MINPRECEDENCE</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Internal - runs After Advice of a part</span>
<span class="sd">        </span>
<span class="sd">        Args:</span>
<span class="sd">        part - The part for which the advice matches</span>
<span class="sd">        callingObject - the circuit or advice which added the part</span>
<span class="sd">        precedence - Only run advice with a precedence greater or equal this</span>
<span class="sd">            Used if replacement advice has been executed</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="c">#after advice are ordered by ascending precedence</span>
        <span class="c">#the one with the lowest priority is executed</span>
        <span class="c">#if precedenceLevel is set by a replacement advice, we will only</span>
        <span class="c">#execute those advice with &gt;= precedence</span>
        <span class="k">for</span> <span class="n">advice</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">afterAdviceList</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">advice</span><span class="o">.</span><span class="n">precedence</span> <span class="o">&gt;=</span> <span class="n">precedence</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">advice</span><span class="o">.</span><span class="n">pointcut</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">part</span><span class="p">)):</span>
                <span class="n">advice</span><span class="o">.</span><span class="n">adviceMethod</span><span class="p">(</span><span class="n">PointCutContext</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">withinStack</span><span class="p">,</span><span class="n">part</span><span class="p">))</span>    
    </div>
<div class="viewcode-block" id="Weaver.addPart"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.addPart">[docs]</a>    <span class="k">def</span> <span class="nf">addPart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">callingObject</span><span class="p">,</span><span class="n">part</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Called by circuit or aspect to add a part in the execution flow</span>
<span class="sd">        </span>
<span class="sd">        callingObject - the circuit or aspect calling this</span>
<span class="sd">        part - The part supposed to be added</span>
<span class="sd">        </span>
<span class="sd">        &quot;&quot;&quot;</span>
        
        <span class="n">part</span> <span class="o">=</span> <span class="n">checkIfTypeReturnInstance</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        <span class="n">part</span><span class="o">.</span><span class="n">namespace</span> <span class="o">=</span> <span class="n">callingObject</span> 
        <span class="c">#TODO clean this up, the namespace issue...       </span>
        
        
        <span class="c"># before adding the part, add any type advice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addPartTypeAdvice</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">withinStack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">callingObject</span><span class="p">)</span>
        
        <span class="n">continueAddingPart</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runBeforeAndReplaceAdvice</span><span class="p">(</span><span class="n">callingObject</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="n">continueAddingPart</span><span class="p">:</span> 
            <span class="c"># If the part is a composite, we unpack it here. otherwise we finally add the part  </span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">part</span><span class="p">,</span><span class="n">Circuit</span><span class="p">)</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
                
                <span class="c">#add before / after information</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">after</span> <span class="o">=</span> <span class="n">part</span>
                    <span class="n">part</span><span class="o">.</span><span class="n">before</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                
                <span class="bp">self</span><span class="o">.</span><span class="n">partList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">part</span><span class="p">)</span>
                
            <span class="k">else</span><span class="p">:</span>
                <span class="c"># the circuit is not initialized with a weaver</span>
                <span class="n">part</span><span class="o">.</span><span class="n">setWeaver</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">part</span><span class="o">.</span><span class="n">mainCircuit</span><span class="p">()</span>
        
            <span class="bp">self</span><span class="o">.</span><span class="n">runAfterAdvice</span><span class="p">(</span><span class="n">callingObject</span><span class="p">,</span> <span class="n">part</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">withinStack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        
        
    </div>
<div class="viewcode-block" id="Weaver.output"><a class="viewcode-back" href="../../modules/index.html#aosb.core.Weaver.output">[docs]</a>    <span class="k">def</span> <span class="nf">output</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the weaverOutput Element&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">weaverOutput</span>
    </div></div>
<div class="viewcode-block" id="MoleculeValueError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.MoleculeValueError">[docs]</a><span class="k">class</span> <span class="nc">MoleculeValueError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Molecule was expected, but something else was given&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="PartInitializationError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PartInitializationError">[docs]</a><span class="k">class</span> <span class="nc">PartInitializationError</span><span class="p">(</span><span class="ne">Exception</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Part was expected, but something else was given&quot;&quot;&quot;</span>
    </div>
<div class="viewcode-block" id="PartValueError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PartValueError">[docs]</a><span class="k">class</span> <span class="nc">PartValueError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Part was expected, but something else was given&quot;&quot;&quot;</span>
</div>
<div class="viewcode-block" id="InvalidSymbolNameError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.InvalidSymbolNameError">[docs]</a><span class="k">class</span> <span class="nc">InvalidSymbolNameError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A symbol name (string) was not correctly formatted&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</div>
<div class="viewcode-block" id="SymbolExistsWarning"><a class="viewcode-back" href="../../modules/index.html#aosb.core.SymbolExistsWarning">[docs]</a><span class="k">class</span> <span class="nc">SymbolExistsWarning</span><span class="p">(</span><span class="ne">UserWarning</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Part or Molecule declaration uses an existing name&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="InvalidSignatureError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.InvalidSignatureError">[docs]</a><span class="k">class</span> <span class="nc">InvalidSignatureError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A signature (PointCut / Part / Molecule) is incorrectly formatted or typed&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="InvalidPointCutExpressionError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.InvalidPointCutExpressionError">[docs]</a><span class="k">class</span> <span class="nc">InvalidPointCutExpressionError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;There is an error in a Point Cut expression&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="InvalidPointCutOperatorError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.InvalidPointCutOperatorError">[docs]</a><span class="k">class</span> <span class="nc">InvalidPointCutOperatorError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An unknown or illegal operator was used for the point cut&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</div>
<div class="viewcode-block" id="InvalidPointCutError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.InvalidPointCutError">[docs]</a><span class="k">class</span> <span class="nc">InvalidPointCutError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;object of type PointCut expected, but something else given&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</div>
<div class="viewcode-block" id="InvalidAdviceMethodError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.InvalidAdviceMethodError">[docs]</a><span class="k">class</span> <span class="nc">InvalidAdviceMethodError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;method with 2 parameters expected, but something else given&quot;&quot;&quot;</span>
    <span class="k">pass</span>
</div>
<div class="viewcode-block" id="InvalidWeaverOutputMethodError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.InvalidWeaverOutputMethodError">[docs]</a><span class="k">class</span> <span class="nc">InvalidWeaverOutputMethodError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; with 2 parameters expected, but something else given&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="PrecedenceOutOfRangeError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.PrecedenceOutOfRangeError">[docs]</a><span class="k">class</span> <span class="nc">PrecedenceOutOfRangeError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An unknown or illegal operator was used for the point cut&quot;&quot;&quot;</span>
    <span class="k">pass</span>
    </div>
<div class="viewcode-block" id="AspectValueError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.AspectValueError">[docs]</a><span class="k">class</span> <span class="nc">AspectValueError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An Aspect class was expected, but something else given&quot;&quot;&quot;</span>
    
    </div>
<div class="viewcode-block" id="CircuitValueError"><a class="viewcode-back" href="../../modules/index.html#aosb.core.CircuitValueError">[docs]</a><span class="k">class</span> <span class="nc">CircuitValueError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A Circuit class was expected, but something else given&quot;&quot;&quot;</span></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../../index.html">AOSB alpha documentation</a> &raquo;</li>
          <li><a href="../index.html" >Module code</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, Philipp Boeing, Anthony Finkelstein, Darren Nesbeth, Chris Barnes.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>